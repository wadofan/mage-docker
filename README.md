# Docker Compose для SCIFiC

Проект був розроблений в рамках дипломної роботи та призначений
для розгортання вебсайту з використанням Docker-контейнерів:
Apache в якості вебсервера, Nginx в якості зворотнього проксі,
а також Certbot для генерації SSL-сертифікатів від Let's Encrypt.


## Важливо!

Для коректної роботи необхідно створити в корені проекту папку `webroot`,
в яку потрібно скопіювати файли вашого вебсайту. (В нашому випадку ця папка
має містити [цей репозиторий](https://github.com/scific-conference/scific)).


## Перед початком

Для того, щоб Certbot міг сгенерувати сертифікати, необхідно визначити
у вашому середовищі або в файлі `compose.yml` наступні змінні:
- `EMAIL`: електронна пошта, на яку буде зареєстрований SSL-сертифікат;
- `DOMAIN`: доменне ім'я, на для якого буде виданий SSL-сертифікат.


## Як запустити?

Рекомендується скористатись утилітою `docker compose`, яка побудує або
завантажить з Docker Hub необхідні образи, а також створить контейнери,
мережі та волюми, що визначені в файлі `compose.yml`.

У зв'язку зі складностями, що виникали при спробі запуску проекту за
один крок, у файлі `compose.yml` були створені два профілі, які
потрібно запускати послідовно: `gen` для генерації SSL-сертифікатів
і `run` для запуску проекту.

Щоб команда не займала термінал, можна також додати опцію `-d`.

```console
$ docker compose --profile "gen" up
$ docker compose --profile "run" up -d
```


## Як вимкнути?

Скориставшись командою нижче, можна завершити роботу контейнерів,
а також видалити все, що було створено командою `docker compose`
для усіх профілів, визначених у файлі `compose.yml`:

```console
$ docker compose --profile "*" down
```
